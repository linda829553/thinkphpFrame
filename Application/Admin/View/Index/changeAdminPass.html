<include file="changePass_menu" />
		<div id="main-content"> <!-- Main Content Section with everything -->
			
			<noscript> <!-- Show a notification if the user has disabled javascript -->
				<div class="notification error png_bg">
					<div>
						Javascript is disabled or is not supported by your browser. Please <a href="http://browsehappy.com/" title="Upgrade to a better browser">upgrade</a> your browser or <a href="http://www.google.com/support/bin/answer.py?answer=23852" title="Enable Javascript in your browser">enable</a> Javascript to navigate the interface properly.
					</div>
				</div>
			</noscript>
			
			<!-- Page Head -->
			<h2>Welcome John</h2>
			<p id="page-intro">What would you like to do?</p>
			
			<ul class="shortcut-buttons-set">
				
				<li><a class="shortcut-button" href="#"><span>
					<img src="__PUBLIC__/Admin/resources/images/icons/pencil_48.png" alt="icon" /><br />
					Write an Article
				</span></a></li>
				
				<li><a class="shortcut-button" href="#"><span>
					<img src="__PUBLIC__/Admin/resources/images/icons/paper_content_pencil_48.png" alt="icon" /><br />
					Create a New Page
				</span></a></li>
				
				<li><a class="shortcut-button" href="#"><span>
					<img src="__PUBLIC__/Admin/resources/images/icons/image_add_48.png" alt="icon" /><br />
					Upload an Image
				</span></a></li>
				
				<li><a class="shortcut-button" href="#"><span>
					<img src="__PUBLIC__/Admin/resources/images/icons/clock_48.png" alt="icon" /><br />
					Add an Event
				</span></a></li>
				
				<li><a class="shortcut-button" href="#messages" rel="modal"><span>
					<img src="__PUBLIC__/Admin/resources/images/icons/comment_48.png" alt="icon" /><br />
					Open Modal
				</span></a></li>
				
			</ul><!-- End .shortcut-buttons-set -->
			
			<div class="clear"></div> <!-- End .clear -->

			<div class="content-box" id="member-manage"><!-- Start Content Box -->
				
				<div class="content-box-header">
					
					<h3>Content box</h3>
					
					<ul class="content-box-tabs">

					</ul>
					
					<div class="clear"></div>
					
				</div> <!-- End .content-box-header -->
				
				<div class="content-box-content">    
					<form action="__CONTROLLER__/updatePass" method="post" name="task_form">
							
							<fieldset> <!-- Set class to "column-left" or "column-right" on fieldsets to divide the form into columns -->

								<p>
									<label>用户名</label>
									<input class="text-input" type="text" id="username" name="username" value="{$admin_name}" />
								</p>

								<p>
									<label>原密码</label>
									<input class="text-input" type="password" id="pass" name="pass" value="" /> 
									<span id="oldprompt"></span>
								</p>

								<p>
									<label>新密码</label>
									<input class="text-input" type="password" id="newPass" name="newPass" value="" /> 
									<span id="prompt1"></span>
								</p>

								<p>
									<label>重复密码</label>
									<input class="text-input" type="password" id="re_newPass" name="re_newPass" value="" />
									<span id="prompt2"></span>
								</p>
								
								<p>
									<input class="button" id="submit" type="submit" value="更  新" />
								</p>

								<div id="tip4"></div>
								
							</fieldset>
							
							<div class="clear"></div><!-- End .clear -->
							
					</form>
				</div> <!-- End .content-box-content -->
				
			</div> <!-- End .content-box -->
			
			<div class="content-box column-left">
				
				<div class="content-box-header">
					
					<h3>Content box left</h3>
					
				</div> <!-- End .content-box-header -->
				
				<div class="content-box-content">
					
					<div class="tab-content default-tab">
					
						<h4>Maecenas dignissim</h4>
						<p>
						Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed in porta lectus. Maecenas dignissim enim quis ipsum mattis aliquet. Maecenas id velit et elit gravida bibendum. Duis nec rutrum lorem. Donec egestas metus a risus euismod ultricies. Maecenas lacinia orci at neque commodo commodo.
						</p>
						
					</div> <!-- End #tab3 -->        
					
				</div> <!-- End .content-box-content -->
				
			</div> <!-- End .content-box -->
			
			<div class="content-box column-right closed-box">
				
				<div class="content-box-header"> <!-- Add the class "closed" to the Content box header to have it closed by default -->
					
					<h3>Content box right</h3>
					
				</div> <!-- End .content-box-header -->
				
				<div class="content-box-content">
					
					<div class="tab-content default-tab">
					
						<h4>This box is closed by default</h4>
						<p>
						Lorem ipsum dolor sit amet, consectetur adipiscing elit. Sed in porta lectus. Maecenas dignissim enim quis ipsum mattis aliquet. Maecenas id velit et elit gravida bibendum. Duis nec rutrum lorem. Donec egestas metus a risus euismod ultricies. Maecenas lacinia orci at neque commodo commodo.
						</p>
						
					</div> <!-- End #tab3 -->        
					
				</div> <!-- End .content-box-content -->
				
			</div> <!-- End .content-box -->
			<div class="clear"></div>
			
			
			<!-- Start Notifications -->
			
			<div class="notification attention png_bg">
				<a href="#" class="close"><img src="__PUBLIC__/Admin/resources/images/icons/cross_grey_small.png" title="Close this notification" alt="close" /></a>
				<div>
					Attention notification. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin vulputate, sapien quis fermentum luctus, libero. 
				</div>
			</div>
			
			<div class="notification information png_bg">
				<a href="#" class="close"><img src="__PUBLIC__/Admin/resources/images/icons/cross_grey_small.png" title="Close this notification" alt="close" /></a>
				<div>
					Information notification. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin vulputate, sapien quis fermentum luctus, libero.
				</div>
			</div>
			
			<div class="notification success png_bg">
				<a href="#" class="close"><img src="__PUBLIC__/Admin/resources/images/icons/cross_grey_small.png" title="Close this notification" alt="close" /></a>
				<div>
					Success notification. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin vulputate, sapien quis fermentum luctus, libero.
				</div>
			</div>
			
			<div class="notification error png_bg">
				<a href="#" class="close"><img src="__PUBLIC__/Admin/resources/images/icons/cross_grey_small.png" title="Close this notification" alt="close" /></a>
				<div>
					Error notification. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin vulputate, sapien quis fermentum luctus, libero.
				</div>
			</div>
			
			<!-- End Notifications -->
<script>
	function onSuccess (data) {
		// body...
		if (data==1) {
			// alert("正确");
			$("#oldprompt").html('<span class="input-notification success png_bg">密码正确</span>');
		} else{
			// alert("错误");
			$("#oldprompt").html('<span class="input-notification error png_bg">密码错误</span>');
		};
	}

	function onError (argument) {
		// body...
	}
	
	$(function(){
		// ajax 密码验证
		$("#pass").blur(function(){
			$.ajax({
				type: 'post',
				data: {oldpassword:this.value},
				url: 'checkPass',
				success: onSuccess,
				error: onError

			});
		});

		$("#newPass").blur(function(){
			var pass1 = $("#newPass").val().length;
			if (pass1<6) {
				$("#prompt1").html('<span class="input-notification error png_bg">太短了!</span>');
			} else if(pass1>18){
				$("#prompt1").html('<span class="input-notification error png_bg">太长了!</span>');
			}else{
				$("#prompt1").html('<span class="input-notification success png_bg">可接受!</span>');
			}
		});

		$("#re_newPass").blur(function(){
			var tmp = $("#newPass").val();
			var num = $("#re_newPass").val().length;
			if ($("#re_newPass").val()!=tmp) {
				$("#prompt2").html('<span class="input-notification error png_bg">两次密码不一致!</span>');
			}else{
				if (num>=6&&num<=18) {
					$("#prompt2").html('<span class="input-notification success png_bg">正确!</span>');
				} else{
					$("#prompt2").html('<span class="input-notification error png_bg">非法!</span>');
				}
			}
		});

		// 两次输入密码是否一致
		$("#submit").click(function(){
			// // alert();
			// // return false;
			// var pass1 = $("#newPass").val();
			// var pass2 = $("#re_newPass").val();
			// // console.log(pass1+'_'+pass2);
			// // return false;
			// if (pass1 != pass2) {
			// 	// alert("两次输入密码不一致");
			// 	$("#prompt1, #prompt2").html('<span class="input-notification error png_bg">两次密码不一致</span>');
			// 	return false;
			// }else{
			// 	return true;
			// }
			var flag = true;
			var old = $("#pass").val();
			var pass1 = $("#newPass").val();
			var pass2 = $("#re_newPass").val();
			var num1 = $("#newPass").val().length;
			var num2 = $("#re_newPass").val().length;
			if (num1!=num2||num1<6||num1>18||num2<6||num2>18||pass1!=pass2) {
				flag = false;
			} else{
				flag = true;
			}
			return flag;
		});
	});

	

</script>